<mxfile host="app.diagrams.net" modified="2024-07-07T08:58:10.868Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36" etag="kpmsyJ7Vwm5bU9f6Sa_e" version="24.6.4" type="github">
  <diagram name="第 1 页" id="9SlIgTtQ-pPHK3Cmt_7Q">
    <mxGraphModel dx="2074" dy="1098" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-31" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;fontFamily=Helvetica;fontSize=12;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="970" y="350" width="910" height="740" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Helvetica;fontSize=12;fontColor=#00994D;shape=flexArrow;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="500" y="330" as="targetPoint" />
            <mxPoint x="500" y="220" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-1" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;Vue.use(VueRouter)&lt;/b&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="400" y="140" width="210" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-3" value="" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="110" y="350" width="830" height="740" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-4" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;混入生命周期钩子&lt;/font&gt;&lt;/h1&gt;&lt;h2&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;通过 Vue.mixin 全局混入 beforeCreated、beforeDestoryed 钩子函数。&lt;/font&gt;&lt;/h2&gt;&lt;p&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;将当前路由信息对象 _route 变为响应式&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;设置监听器（popstate、hashchange）&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;订阅路由变化并改变当前路由信息 _route ,触发响应式渲染&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;fontFamily=Helvetica;fontSize=12;strokeColor=default;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="150" y="370" width="720" height="260" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-5" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;全局挂载 $router\$route 属性&lt;/font&gt;&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(31, 32, 35); font-family: &amp;quot;JetBrains Mono&amp;quot;, 微软雅黑, &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;Fira Code&amp;quot;, &amp;quot;Operator Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;&quot;&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;&quot;&gt;Object&lt;/span&gt;.&lt;span style=&quot;&quot;&gt;defineProperty&lt;/span&gt;(&lt;span style=&quot;&quot;&gt;Vue&lt;/span&gt;.prototype, &lt;span style=&quot;&quot;&gt;&#39;$router&#39;&lt;/span&gt;, {&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;&quot;&gt;get&lt;/span&gt;() { &lt;span style=&quot;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;font-style: italic;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;&quot;&gt;_routerRoot&lt;/span&gt;.&lt;span style=&quot;&quot;&gt;_router&lt;/span&gt; }&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp; })&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;&quot;&gt;Object&lt;/span&gt;.&lt;span style=&quot;&quot;&gt;defineProperty&lt;/span&gt;(&lt;span style=&quot;&quot;&gt;Vue&lt;/span&gt;.prototype, &lt;span style=&quot;&quot;&gt;&#39;$route&#39;&lt;/span&gt;, {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;&quot;&gt;get&lt;/span&gt;() { &lt;span style=&quot;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;font-style: italic;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;&quot;&gt;_routerRoot&lt;/span&gt;.&lt;span style=&quot;&quot;&gt;_route&lt;/span&gt; }&lt;/div&gt;&lt;div&gt;&amp;nbsp; })&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;$router 数据源来自 VueRouter 实例对象&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;$route&amp;nbsp; 数据源来自当前的导航信息 _route 对象（是一个响应式对象）&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;fontFamily=Helvetica;fontSize=12;strokeColor=default;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="150" y="640" width="720" height="260" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-6" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;font&gt;全局注册 RouterView\RouterLink 组&lt;/font&gt;件&lt;/font&gt;&lt;/h1&gt;&lt;div style=&quot;background-color: rgb(31, 32, 35); font-family: &amp;quot;JetBrains Mono&amp;quot;, 微软雅黑, &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;Fira Code&amp;quot;, &amp;quot;Operator Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;&quot;&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;&quot;&gt;// 全局注册了两个路由相关的组件,可以直接使用&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;&quot;&gt;Vue&lt;/span&gt;.&lt;span style=&quot;&quot;&gt;component&lt;/span&gt;(&lt;span style=&quot;&quot;&gt;&#39;RouterView&#39;&lt;/span&gt;, &lt;span style=&quot;&quot;&gt;View&lt;/span&gt;)&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;&quot;&gt;Vue&lt;/span&gt;.&lt;span style=&quot;&quot;&gt;component&lt;/span&gt;(&lt;span style=&quot;&quot;&gt;&#39;RouterLink&#39;&lt;/span&gt;, &lt;span style=&quot;&quot;&gt;Link&lt;/span&gt;)&lt;/div&gt;&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="150" y="920" width="720" height="140" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-9" value="&lt;font&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;new VueRouter(options)&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1230" y="140" width="280" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;fontFamily=Helvetica;fontSize=12;fontColor=#00994D;strokeWidth=2;" edge="1" parent="1" source="ERSdIEYuZWGnIZoCy1sr-14" target="ERSdIEYuZWGnIZoCy1sr-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-14" value="Text" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1120" y="485" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-18" value="" style="group;fontColor=#00994D;strokeWidth=2;strokeColor=#00994D;" vertex="1" connectable="0" parent="1">
          <mxGeometry x="1000" y="360" width="620" height="330" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-11" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;fontFamily=Helvetica;fontSize=12;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="ERSdIEYuZWGnIZoCy1sr-18">
          <mxGeometry width="620" height="210" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-13" value="&lt;font style=&quot;font-size: 24px;&quot;&gt;&lt;b style=&quot;font-size: 24px;&quot;&gt;创建 history 实例对象&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=24;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;fontColor=#000000;strokeWidth=2;" vertex="1" parent="ERSdIEYuZWGnIZoCy1sr-18">
          <mxGeometry x="26" y="30" width="320" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-15" value="根据 mode 设置创建 history 对象，有 H5、Hash、Abstract 三种&lt;div style=&quot;font-size: 18px;&quot;&gt;&lt;br style=&quot;font-size: 18px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 18px;&quot;&gt;history 对象主要有 push、replace、go 等这些导航方法，还有 listen 用于传入一个回调，路由变化会调用这个回调&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=18;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;fontStyle=1;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="ERSdIEYuZWGnIZoCy1sr-18">
          <mxGeometry x="26" y="65" width="574" height="120" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontFamily=Helvetica;fontSize=12;fontColor=#00994D;strokeWidth=2;" edge="1" parent="ERSdIEYuZWGnIZoCy1sr-18" source="ERSdIEYuZWGnIZoCy1sr-13" target="ERSdIEYuZWGnIZoCy1sr-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-23" value="" style="group;fontColor=#00994D;strokeWidth=2;" vertex="1" connectable="0" parent="1">
          <mxGeometry x="1000" y="620" width="848" height="625" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-20" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;fontFamily=Helvetica;fontSize=12;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="ERSdIEYuZWGnIZoCy1sr-23">
          <mxGeometry width="750" height="260" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-21" value="&lt;font style=&quot;font-size: 24px;&quot;&gt;&lt;b style=&quot;font-size: 24px;&quot;&gt;创建 matcher 主要用于路由匹配&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=24;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;fontColor=#000000;strokeWidth=2;" vertex="1" parent="ERSdIEYuZWGnIZoCy1sr-23">
          <mxGeometry x="26" y="30" width="384" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-22" value="&lt;div style=&quot;font-size: 18px;&quot;&gt;根据传入的 routes 路由配置创建路由索引信息，主要有：&lt;/div&gt;&lt;div style=&quot;font-size: 18px;&quot;&gt;&amp;nbsp;1. nameMap：路由名称到路由记录的映射，用于按 name 匹配路由&lt;/div&gt;&lt;div style=&quot;font-size: 18px;&quot;&gt;&amp;nbsp;2. pathList：路由路径列表，用于按路径匹配路由&lt;/div&gt;&lt;div style=&quot;font-size: 18px;&quot;&gt;&amp;nbsp;3. pathMap：路由路由到路由记录的匹配，主要用于快速根据 path 查找到相关路由信息&lt;/div&gt;&lt;div style=&quot;font-size: 18px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 18px;&quot;&gt;匹配规则是：优先 name，然后 path&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=18;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;fontStyle=1;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="ERSdIEYuZWGnIZoCy1sr-23">
          <mxGeometry x="26" y="65" width="734" height="155" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-28" value="new Vue（...）&lt;div&gt;初始化路由&lt;/div&gt;&lt;div&gt;获取当前 url 进行第一次导航&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="990" y="1440" width="150" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Helvetica;fontSize=12;fontColor=#00994D;shape=flexArrow;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1369.5" y="330" as="targetPoint" />
            <mxPoint x="1369.5" y="220" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-39" value="&lt;font&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;new Vue（{router}）&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="2170" y="140" width="280" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-40" value="" style="group;fontColor=#00994D;strokeWidth=2;" vertex="1" connectable="0" parent="1">
          <mxGeometry x="2090" y="360" width="750" height="730" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-45" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;fontFamily=Helvetica;fontSize=12;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="ERSdIEYuZWGnIZoCy1sr-40">
          <mxGeometry x="-160" y="-10" width="910" height="740" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-46" value="" style="group;fontColor=#00994D;strokeWidth=2;" vertex="1" connectable="0" parent="ERSdIEYuZWGnIZoCy1sr-40">
          <mxGeometry x="-100" y="15" width="680" height="210" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-41" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;fontFamily=Helvetica;fontSize=12;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="ERSdIEYuZWGnIZoCy1sr-46">
          <mxGeometry width="680" height="210" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-42" value="&lt;b&gt;router.init()&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=24;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;fontColor=#000000;strokeWidth=2;" vertex="1" parent="ERSdIEYuZWGnIZoCy1sr-46">
          <mxGeometry x="26" y="30" width="320" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-43" value="&lt;div style=&quot;font-size: 18px;&quot;&gt;1、监听 Vue 实例的创建、销毁，以便于做一些初始化、清理工作&lt;/div&gt;&lt;div style=&quot;font-size: 18px;&quot;&gt;2、初始化监听事件（popstate、hashchange），事件监听在此时被设置&lt;/div&gt;&lt;div style=&quot;font-size: 18px;&quot;&gt;3、根据当前的路由地址进行第一次导航&lt;/div&gt;&lt;div style=&quot;font-size: 18px;&quot;&gt;4、调用 router.history.listen 建立路由与页面渲染的关联关系（订阅路由变化）,路由变化之后可触发页面的响应式更新&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=18;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;fontStyle=1;fontColor=#00994D;strokeWidth=2;" vertex="1" parent="ERSdIEYuZWGnIZoCy1sr-46">
          <mxGeometry x="26" y="65" width="614" height="120" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontFamily=Helvetica;fontSize=12;fontColor=#00994D;strokeWidth=2;" edge="1" parent="ERSdIEYuZWGnIZoCy1sr-46" source="ERSdIEYuZWGnIZoCy1sr-42" target="ERSdIEYuZWGnIZoCy1sr-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ERSdIEYuZWGnIZoCy1sr-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Helvetica;fontSize=12;fontColor=#00994D;shape=flexArrow;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2309.5" y="330" as="targetPoint" />
            <mxPoint x="2309.5" y="220" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
